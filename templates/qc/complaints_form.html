{% extends "qc/base.html" %}
{% block content %}

<h1 class="h4 mb-3">
  {% if variant %}New Complaint for {{ variant.sku }}{% else %}Add Complaint{% endif %}
</h1>

<form method="post" class="card p-3" style="max-width:720px;">
  {% csrf_token %}

  {% if form %}
    {{ form.as_p }}
  {% else %}
    <p><strong>Frame:</strong> {{ variant.sku }}</p>

    <label>Store</label>
    <select name="store" class="form-select mb-2">
      <option value="">(none)</option>
      {% for s in stores %}
        <option value="{{ s.id }}">{{ s.name }}</option>
      {% endfor %}
    </select>

    <label>Failure Type</label>
    <select name="failure_type" class="form-select mb-2">
      {% for k,l in failure_choices %}
        <option value="{{ k }}">{{ l }}</option>
      {% endfor %}
    </select>

    <label>Severity</label>
    <select name="severity" class="form-select mb-2">
      {% for k,l in severity_choices %}
        <option value="{{ k }}">{{ l }}</option>
      {% endfor %}
    </select>

    <label>Notes</label>
    <textarea name="notes" class="form-control mb-2"></textarea>
  {% endif %}

  <div class="mt-3">
    <button class="btn btn-primary">Save</button>
    <a class="btn btn-outline-secondary" href="{% url 'complaints_list' %}">Cancel</a>
  </div>
</form>

{% endblock %}
