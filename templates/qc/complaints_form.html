{% extends "qc/base.html" %}
{% block content %}

<div class="d-flex align-items-center justify-content-between mb-3">
  <h3 class="mb-0">New Complaint</h3>
  <a class="btn btn-outline-secondary btn-sm" href="{% url 'complaints_list' %}">Back</a>
</div>

<div class="card shadow-sm">
  <div class="card-body">

    {% if variant %}
      <div class="alert alert-light border">
        <div class="fw-semibold">Frame:</div>
        <div>{{ variant.style.style_code }} — {{ variant.sku }}</div>
        {% if variant.color %}<div class="text-muted small">Color: {{ variant.color }}</div>{% endif %}
        {% if variant.size %}<div class="text-muted small">Size: {{ variant.size }}</div>{% endif %}
      </div>
    {% endif %}

    <form method="post">
      {% csrf_token %}

      {% if form %}
        {{ form.as_p }}
      {% else %}
        <div class="mb-3">
          <label class="form-label">Store</label>
          <select name="store" class="form-select">
            <option value="">—</option>
            {% for s in stores %}
              <option value="{{ s.id }}">{{ s.name }}</option>
            {% endfor %}
          </select>
        </div>

        <div class="mb-3">
          <label class="form-label">Failure Type</label>
          <select name="failure_type" class="form-select">
            {% for val,label in failure_choices %}
              <option value="{{ val }}">{{ label }}</option>
            {% endfor %}
          </select>
        </div>

        <div class="mb-3">
          <label class="form-label">Severity</label>
          <select name="severity" class="form-select">
            {% for val,label in severity_choices %}
              <option value="{{ val }}">{{ label }}</option>
            {% endfor %}
          </select>
        </div>

        <div class="mb-3">
          <label class="form-label">Notes</label>
          <textarea name="notes" class="form-control" rows="4"></textarea>
        </div>
      {% endif %}

      <button class="btn btn-dark">Save Complaint</button>
    </form>

  </div>
</div>

{% endblock %}

