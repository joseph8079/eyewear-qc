{% extends "qc/base.html" %}
{% block title %}New Complaint • Ctrue Quality Tracker{% endblock %}

{% block content %}
<div class="mb-3">
  <h1 class="h4 mb-0">New Complaint</h1>
  <div class="text-muted">
    For: <span class="fw-semibold">{{ variant.sku }}</span>
    (Style: {{ variant.style.style_code }})
  </div>
</div>

<div class="card shadow-sm">
  <div class="card-body">
    <form method="post">
      {% csrf_token %}

      <div class="row g-3">
        <div class="col-md-6">
          <label class="form-label">Store (optional)</label>
          <select name="store" class="form-select">
            <option value="">—</option>
            {% for s in stores %}
              <option value="{{ s.id }}">{{ s.name }}</option>
            {% endfor %}
          </select>
        </div>

        <div class="col-md-6">
          <label class="form-label">Severity</label>
          <select name="severity" class="form-select" required>
            {% for value,label in severity_choices %}
              <option value="{{ value }}">{{ label }}</option>
            {% endfor %}
          </select>
        </div>

        <div class="col-12">
          <label class="form-label">Failure Type</label>
          <select name="failure_type" class="form-select" required>
            {% for value,label in failure_choices %}
              <option value="{{ value }}">{{ label }}</option>
            {% endfor %}
          </select>
        </div>

        <div class="col-12">
          <label class="form-label">Notes</label>
          <textarea name="notes" class="form-control" rows="4" placeholder="Add details..."></textarea>
        </div>

        <div class="col-12 d-flex gap-2">
          <button class="btn btn-dark" type="submit">Create Complaint</button>
          <a class="btn btn-outline-dark" href="{% url 'frames_list' %}">Back to Frames</a>
        </div>
      </div>
    </form>
  </div>
</div>
{% endblock %}
