{% extends "qc/base.html" %}
{% block content %}

<div class="d-flex justify-content-between mb-3">
  <h1 class="h4">Complaints</h1>
  <a class="btn btn-primary btn-sm" href="{% url 'complaint_create' %}">+ Add Complaint</a>
</div>

<table class="table table-striped table-sm">
  <thead>
    <tr>
      <th>Date</th>
      <th>SKU</th>
      <th>Style</th>
      <th>Store</th>
      <th>Failure</th>
      <th>Severity</th>
      <th>Notes</th>
    </tr>
  </thead>
  <tbody>
    {% for c in complaints %}
    <tr>
      <td>{{ c.created_at|date:"Y-m-d H:i" }}</td>
      <td>{{ c.variant.sku }}</td>
      <td>{{ c.variant.style.style_code }}</td>
      <td>{% if c.store %}{{ c.store.name }}{% else %}-{% endif %}</td>
      <td>{{ c.get_failure_type_display }}</td>
      <td>{{ c.get_severity_display }}</td>
      <td>{{ c.notes }}</td>
    </tr>
    {% empty %}
    <tr><td colspan="7" class="text-muted">No complaints</td></tr>
    {% endfor %}
  </tbody>
</table>

{% endblock %}
